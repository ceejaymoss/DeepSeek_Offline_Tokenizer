#pip install tiktoken in bash
import tiktoken

# Define cost constants
cache_hit_multi = 0.075
cache_miss_multi = 0.15
one_mill_tokens_output = 0.6

# Load OpenAI tokenizer (choose model encoding)
# Options: "gpt-4", "gpt-3.5-turbo", "text-davinci-003", etc.
encoding = tiktoken.encoding_for_model("gpt-4o-mini")

# Test text
text = "1 INTRODUCTION When the total of some entity, its quantity, is known to be invariant for a given volume, it is said to be conserved within the volume. When it is not conserved, then it is said to bebalanced by sources of that quantity.Only in exceptional cases, a physical meaning can be attached to the sources balancing a specific quantity. A considerable part of the history of mechanics may be understood asa gigantic struggle for the proper kinematical quantities to bebalanced by physically meaningful sources of the motion of material bodies. Nowadays, the laws of balance of mass, of linear and angular momentum, and of energy are considered as the proper set of balance equations of mechanics. These balance equations are considered as fundamental, since they hold for all material bodies, be the latter modeled as a system of single mass-points, be the mass continuously distributed in solid or fluid form, or be it mixed from various constituents. The concept of mass asserts that mass is conserved within a material volume of a body in the absence of sources of mass. A material volume possesses a closed surface that is moving with the material particles located on this surface. The fundamental equations of classical mechanics were originally formulated for the case of an invariant mass contained in a material volume. ~In the Einstein special theory of relativity, which is outside the topic of the present review, a velocity-dependent reativistic mass may be introduced in formulating the equations of motion of a particle. However, the rest mass is usually assumed to be constant, see, eg, Sections 29 and 63 of Pauli @1.! Mass is generally not conserved when sources of mass are present, or when it is not appropriate to consider a material volume at all. Mass then is said to be variable for the system under consideration. Mechanical systems with variable mass follow as the result of a problem-oriented modeling. In the mechanics of solids and mass-points, numerous applied problems can be found in which material is expelled from a reservoir, or in which material is captured and afterwards transported by some mechanism. Frequently, it turns out to be impossible ~or it is not appropriate! to model the motion of the material which is situated inside the reservoir, or which is located within some distance of the mechanism. It is then necessary to enclose the interesting portions of the respective material body by means of a non-material volume. A non-material volume possesses a closed surface that is moving at a velocity different from the velocity of the material particles instantaneously located on this surface. The mass, which is contained in a non-material volume, therefore needs not to be conserved. Such a non-material volume is called a control volume in the terminology of fluid mechanics. A flux of mass per unit area and time appears to take place across the control surface enclosing the control volume. The use of the control volume concept is quite natural in fluid mechanics and has become standard in this field. In the literature on fluid mechanics, the special case of a nonmaterial volume at rest is sometimes denoted as control volume, the case of a rigid control volume moving relatively to the material is referred to as non-inertial control volume, and the material contained in a material volume is called the system, see Section 4.7 of the book on the mechanics of fluids by Shames @2. See also, eg, Section 1.2.4 of the handbook article on fluid dynamics by White @3. In order to avoid ambiguities, we prefer to use the notion of a nonmaterial volume when we discuss a volume enclosed by a control surface moving at a velocity different from the velocity of the material particles. Subsequently, we do not restrict ourselves to the case of a rigid control surface. We furthermore refer to a spatial volume in the special case of a volume enclosed by a rigid control surface at rest. When we write about a system, we mean the mechanical model consisting of material particles, control surfaces, and sources of mass. Frequently, in solid as well as in fluid mechanics, it is appropriate to model the exchange of mass between the volume under consideration and the outside world by means of interior sources ~or sinks! of mass. For instance, in the continuum theory of reactive mixtures, in the so-called theory of heterogeneous media, mass is assumed to be exchanged between the various constituents such that it appears to be not conserved for a single constituent within a volume being material for the total mixture. When writing the equations of balance for a single constituent of a reactive mixture, distributed sources of mass thus must be considered, see Section 158 of Truesdell and Toupin @4. It is the scope of the present contribution to review some extensions of the fundamental equations of mechanics that were presented in the literature with respect to problems without conservation of mass. To a certain extent, we tried to follow the notations used in the celebrated Handbuchartikel of Truesdell and Toupin @4 on the classical field theories published in 1960, such that the reader may consult their widely distributed text if a further clarification is needed. The majority of the subsequently presented relations concerning the equations of balance of mass and of linear momentum for variable-mass systems were not worked out by Truesdell and Toupin @4. Our review thus contains a large number of additional important contributions belonging to both the periods after and before the year 1960. The Handbuchartikel of Truesdell and Toupin @4, however, represents an important land-mark also with respect to the development of the topic under consideration. The material of the present review is organized as follows: In Section 2, we summarize the presentation of the general balance law given in Section 157 of Truesdell and Toupin @4, and we review a general formulation of the transport theorem dating back to Reynolds @5. In Section 3 of our review, we use the general formulations of Section 2 to derive and to review the equations of balance of mass and linear momentum when mass is supplied by sources in the interior of a material volume, and we discuss the appropriate modeling of sources of mass in some detail. In Section 4, we treat the equations of balance of mass and linear momentum when mass is flowing through the surface of a non-material volume in the absence of interior sources of mass, and we point out some analogies to the equations presented in Section 3. The equations of balance of angular momentum and energy for variable-mass systems will be treated separately, in a second part of the review. Throughout the paper, we use the spatial description of continuum mechanics. A transition from our continuum formulation to systems of mass-points can be performed by interpreting the integrals occurring in the equations of balance in the sense of Stieltjes-integrals, see, eg, Sections 2 and 26 of Hamel @6. For the sake of brevity, the transition to systems of mass-points will be left to the reader. We further restrict our formulations to homogeneous media, or to the single constituents of a mixture. In writing the present review, we intended to classify results to be found here and there in the literature, not only in older expositions, but also in more recent contributions. We especially wished to bring some possibly forgotten work to the attention of the reader. However, we cannot claim that our review is complete. The literature on the topic turned out to be sparsely distributed over a wide range of different areas. Please understand that we have limited our exposition to some of the more fundamental contributions that came to our knowledge, and to some of the respective areas only"

# Encode and count tokens
result = encoding.encode(text)
token_count = len(result)

# Calculate costs
token_cost_cache_hit = (token_count * one_mill_tokens_output * cache_hit_multi) / 1_000_000
token_cost_cache_miss = (token_count * one_mill_tokens_output * cache_miss_multi) / 1_000_000

print(f"Token count: {token_count}")
print(f"Cache hit cost (USD): ${token_cost_cache_hit:.6f}")
print(f"Cache miss cost (USD): ${token_cost_cache_miss:.6f}")

# Optional: Show cost per million tokens
print(f"\nCost per million tokens:")
print(f"Cache hit: ${one_mill_tokens_output * cache_hit_multi:.6f}")
print(f"Cache miss: ${one_mill_tokens_output * cache_miss_multi:.6f}")

# Optional: Show token breakdown
print("\nToken breakdown:")
for token in result[:10]:  # Show first 10 tokens
    print(f"Token ID: {token}, Text: {encoding.decode([token])}")